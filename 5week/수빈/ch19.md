# 프로토타입

자바스크립트 : 명령형, 함수형, **프로토타입 기반 객체지향** 프로그래밍을 지원하는 멀티 패러다임 프로그래밍 언어

- 자바스크립트를 이루고 있는 거의 모든것이 객체
  - 객체 : 원시타입의 값 제외 나머지 값들 > 함수, 배열, 정규표현식 등

## 19.1 객체지향 프로그래밍

- 정의 : 여러개의 독립적 단위, 즉 객체의 집합으로 프로그램을 표현하려는 프로그래밍 패러다임
  - 명령형 프로그래밍(프로그램을 명령어 또는 함수의 목록으로 보는것)의 절차지향적 관점에서 벗어남
- 실세계의 실체를 인식하는 철학적 사고를 프로그래밍에 접목하려는 시도에서 시작.
  - 속성 : 실체는 특징이나 성질을 나타내는 것
  - 추상화 : 프로그램에 필요한 속성만 간추어 내어 표현하는 것
  - ex) 사람은 이름, 주소, 성별등의 속성을 갖고 그중 여자인 사람을 간추려내어 표현하는 것을 추상화
  - 객체 : 속성을 통해 여러개 값을 하나의 단위로 구성한 복합적인 자료구조
    - 각 객체는 고유의 기능을 수행하면서 다른객체와 관계성을 가질 수 있음 (다른 객체와 메세지 주고받기, 데이터 처리, 상태 데이터,동작 상속 가능)
  - 객체지향 프로그래밍 : 독립적인 객체의 집합으로 프로그램을 표현하려는 프로그래밍 패러다임.
    - 객체의 상태를 나타내는 데이터와 상태 데이터를 조작하는 동작을 하나의 논리적인 단위로 묶어 생각함
    - 프로퍼티 : 상태 데이터
    - 동작 : 메서드
  - ex) 원에 반지름은 속성이자 원의 상태를 나타내는 데이터. 이 속성을 통해서 원의 지름, 둘레, 넓이 구함(=동작)

## 19.2 상속과 프로토타입

- 상속 : 객체의 프로퍼티, 메서드를 다른객체가 상속받아 그대로 사용 가능
- 자바스크립트는 프로토타입 기반으로 상속을 구현하여 불필요한 중복제거
  - 불필요한 중복 : 생성자 함수가 생성하는 모든 객체의 프로퍼티, 메서드는 생성할떄마다 메서들를 중복 생성 및 중복 소유함 </br>
    ⇒ 프로토타입 기반으로 상속 구현 가능!
    ```jsx
    // 중복 제거 X : Circle 호출때마다 radius, getArea 생성
    function Circle(radious) {
      this.radius = radius;
      this.getArea = function () {
        return Math.PI * this.radius ** 2;
      };
    }

    // 중복 제거 O
    Circle.prototype.getArea = function () {
      return Math.PI * this.radiuw ** 2;
    };
    ```
    - Circle 생성자가 생성한 모든 인스턴스는 상위 객체 역할을 하는 Circle.prototype의 모든 프로퍼티와 메서드 상속받음
    - 따라서 중복 제거가 가능하도록 위와 같이 작성하여 해당 메서드 공유하여 사용 가능

## 19.3 프로토타입 객체

- 프로토타입 객체
  - 객체간 상속 (객체지향 프로그래밍의 근간)을 구현하기 위해 사용
  - 어떤 객체의 상위 객체 역할 > 공유 프로퍼티, 메서드 제공
  - 모든 객체는 [[Prototype]] 내부 슬롯을 갖고, 객체 생성시 생성방식에 따라 프로토타입이 결정되고 [[Prototype]] 에 저장됨
    - 객체 리터럴에 의해 생성된 객체의 프로토타입 - Object.prototype
    - 생성자함수에 의해 생성된 객체의 프로토타입 - 생성자 함수의 prototype 프로퍼티에 바인딩된 객체
  - 모든 객체는 하나의 프로토타입을 갖음 (내부 슬롯값이 null 인 객체 제외)
  - 모든 프로토타입은 생성자 함수와 연결됨 > 자신의 constructor 프로퍼티를 통해 생성자 함수에 접근 가능. 생성자 함수는 자신의 prototype 프로퍼티를 통해 프로토타입 접근 가능
- `__proto__` 접근자
  - 내부슬롯은 프로퍼티 X
  - [[Prototype]] 내부슬롯에 `__proto__` 접근자 프로퍼티로 간접적 접근가능
    - 빨간박스 : Object.prototype > `__proto__` 로 접근 가능
 ![image](https://github.com/KingJiwon/js_deep_dive/assets/84695884/396bfc41-050c-455e-9ec6-0479194615f1)
  - `__proto__` 접근자 프로퍼티는 상속을 통해 사용됨
      - `__proto__` 접근자는 객체가 직접 소유하는 프로퍼티가 X
      - Object.protoype의 프로퍼티 : 상속을 통해 접근자 프로퍼티 사용 가능
  - `__proto__` 접근자 프로퍼티로 프로토타입에 접근하는 이유
      - 상호 참조에 의해 프로토타입 체인 생성 방지 : 서로 자신의 프로타입이 되는 상황 발생 가능성 있음
  - `__proto__` 접근자 프로퍼티는 실제 코드에서 사용 X : 일부 객체가 접근자 프로퍼티 사용이 안됨. 그럼에도 참조를 취득하고 싶다면?
      - Object.getPrototpyeOf : 프로퍼티의 참조 췯그
      - Object.setPrototypeOf : 프로토타입 교체
  - 함수 객체의 prototype 프로퍼티
      - 함수 객체만이 소유하는 prototype 프로퍼티는 생성자 함수가 생성할 인스턴스의 프로토타입 가리킴
      - 화살표함수, 메서드 축약표현으로 정의한 메서드는 prototype 미소유 및 미 생성
      - 모든 객체가 가지고있는(Object.protoype으로 상속받은)  `__proto__` 접근자 프로퍼티와 함수 객체만이 가진 prototype 은 동일한 프로토타입 가리킴
