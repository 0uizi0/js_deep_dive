# 핵심 내용 정리

## 13.1 스코프란?

- `스코프` : 모든 식별자(변수 이름, 함수 이름, 클래스 이름 등)가 자신이 선언된 위치에 의해 다른 코드가 식별자 자신을 참조할 수 있는 유효 범위
- `식별자 결정` : 이름이 같은 두 개의 변수 중에서 어떤 변수를 참조해야 할 것인지를 결정하는 것
- `렉시컬 환경` : 코드가 어디서 실행되며 주변에 어떤 코드가 있는지
    
    → 코드의 문맥은 렉시컬 환경으로 이루어진다.
    
- 스코프를 통해 **식별자의 충돌을 방지**하여 같은 이름의 식별자를 사용할 수 있게 한다.

### 변수의 중복 선언

- var : 같은 스코프 내에서 중복 선언이 허용
    
    ⇒ 의도치 않은 변수 값 재할당
    
- let, const : 같은 스코프 내에서의 중복 선언 허용 X

## 13.2 스코프의 종류

- 전역 스코프 ~> 전역 변수는 어디서든지 참조 가능
- 지역 스코프 ~> 지역 변수는 자신의 지역 스코프와 하위 지역 스코프에서 유효

## 13.3 스코프 체인

- `함수의 중첩` : 함수 몸체 내부에서 함수가 정의된 것
    - `중첩 함수` : 함수 몸체 내부에서 정의한 함수
    - `외부 함수` : 중첩 함수를 포함하는 함수
- **스코프는 함수의 중첩에 의해 계층적 구조를 갖는다.**
- `스코프 체인` : 스코프가 계층적으로 연결된 것
- 변수를 참조할 때 자바스크립트 엔진은 **스코프 체인을 통해 변수를 참조하는 코드의 스코프에서 시작하여 상위 방향으로 이동하며 선언된 변수를 검색한다.**
    
    **→ 상위 스코프에서 유효한 변수는 하위 스코프에서 자유롭게 참조 가능**
    
    **→ 하위 스코프에서 유효한 변수는 상위 스코프에서 참조 불가**
    

## 13.4 함수 레벨 스코프

- `함수 레벨 스코프` : 함수 내에서 선언된 변수는 함수 내에서만 유효하며 함수 외부에서는 참조할 수 없다. 즉, 함수 내부에서 선언한 변수는 지역 변수이며 함수 외부에서 선언한 변수는 모두 전역 변수이다.
- `블록 레벨 스코프` : 모든 코드 블록 내에서 선언된 변수는 코드 블록 내에서만 유효하며 코드 블록 외부에서는 참조할 수 없다. 즉, 코드 블록 내부에서 선언한 변수는 지역 변수이다.
- var 키워드로 선언된 변수는 오직 함수의 코드 블록(함수 몸체)만을 지역 스코프로 인정함 ~> 함수 레벨 스코프
    
    ⇒ 함수 밖에서 var 키워드로 선언된 변수는 코드 블록 내에서 선언되었다 할지라도 모두 전역변수
    
    ⇒ 전역변수의 중복 선언으로 인한 값 재할당
    
    ```jsx
    var x = 1;
    
    if (true) {
    	var x = 10;
    }
    
    console.log(x); // 10
    ```
    
- let, const 키워드는 블록 레벨 스코프를 지원함

## 13.5 렉시컬 스코프

- **동적 스코프** : **함수를 어디서 호출했는지**에 따라 함수의 상위 스코프를 결정한다.
    
    → 함수가 호출되는 시점에 동적으로 상위 스코프 결정
    
- **렉시컬 스코프(정적 스코프)** : **함수를 어디서 정의했는지**에 따라 함수의 상위 스코프를 결정한다.
    
    → 함수 정의가 평가되는 시점에 상위 스코프가 정적으로 결정
    
- **자바스크립트는 렉시컬 스코프를 따라 상위 스코프를 결정한다.**
    
    **함수가 호출된 위치는 상위 스코프 결정에 어떠한 영향도 주지 않는다.**
    
    **즉, 함수의 상위 스코프는 언제나 자신이 정의된 스코프다.**
    
- **함수의 상위 스코프는 함수 정의가 실행될 때 정적으로 결정된다.**
    
    ← 함수가 호출될 때마다 함수의 상위 스코프를 참조할 필요가 있기 때문
    

```jsx
var x = 1;

function foo() {
  var x = 10;
  console.log("var의 중복 선언으로 인한 값 재할당 결과", x);
  bar();
}

// bar 함수는 전역에서 정의된 함수 => 상위 스코프: 전역 => 전역 변수 x의 값은 1
function bar() {
  console.log(x);
}

foo();
bar();

/** result :
 * var의 중복 선언으로 인한 값 재할당 결과 10
 * 1
 * 1
 */
```

---

# 면접 예상 질문

## 💥 스코프란?

모든 식별자가 자신이 선언된 위치에 의해 다른 코드가 식별자 자신을 참조할 수 있는 유효 범위이다.

## 💥 변수의 중복 선언

var 키워드로 선언할 경우, 같은 스코프 내에서의 중복 선언이 가능하다.

때문에 의도치 않은 변수 값 재할당이 일어난다.

let, const 키워드로 선언할 경우, 같은 스코프 내에서의 중복 선언이 불가능하다.

## 💥 함수 레벨 스코프와 블록 레벨 스코프

함수 레벨 스코프는 함수 내에서 선언된 변수는 함수 내에서만 유효하며 함수 외부에서는 참조할 수 없다.

블록 레벨 스코프는 모든 코드 블록 내에서 선언된 변수는 코드 블록 내에서만 유효하며 코드 블록 외부에서는 참조할 수 없다. 

## 💥 자바스크립트의 상위 스코프 결정

자바스크립트의 경우, 렉시컬 스코프를 따라 상위 스코프를 결정한다.

렉시컬 스코프란, **함수를 어디서 정의했는지**에 따라 함수의 상위 스코프를 결정하는 것이다.

즉, 함수가 호출된 위치가 아닌 **자신이 정의된 스코프를 기준으로 상위 스코프가 결정된다.**

---

# 이야기하고 싶은 것